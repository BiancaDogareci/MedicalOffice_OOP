-- liquibase formatted sql

-- changeset bianc:1716574230089-1
CREATE TABLE APPOINTMENT
(
    ID         BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    DATE       date,
    TIME       VARCHAR(255),
    PATIENT_ID BIGINT,
    DOCTOR_ID  BIGINT,
    PAYMENT_ID BIGINT,
    CONSTRAINT pk_appointment PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-2
CREATE TABLE DOCTOR
(
    ID             BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    FIRST_NAME     VARCHAR(255),
    LAST_NAME      VARCHAR(255),
    SPECIALIZATION VARCHAR(255),
    PHONE_NUMBER   VARCHAR(255),
    CONSTRAINT pk_doctor PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-3
CREATE TABLE EQUIPMENT
(
    ID            BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME          VARCHAR(255),
    QUANTITY      INTEGER,
    PURCHASE_DATE date,
    CONSTRAINT pk_equipment PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-4
CREATE TABLE EXAMINATION_EQUIPMENT
(
    ID               BIGINT NOT NULL,
    EXAMINATION_TYPE VARCHAR(255),
    CONSTRAINT pk_examination_equipment PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-5
CREATE TABLE MEDICAL_RECORD
(
    ID                    BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    DATE                  date,
    DIAGNOSIS             VARCHAR(255),
    PRESCRIBED_MEDICATION VARCHAR(255),
    TREATMENT_PERIOD      VARCHAR(255),
    PATIENT_ID            BIGINT,
    CONSTRAINT pk_medical_record PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-6
CREATE TABLE OTHER_EQUIPMENT
(
    ID    BIGINT NOT NULL,
    USAGE VARCHAR(255),
    CONSTRAINT pk_other_equipment PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-7
CREATE TABLE PATIENT
(
    ID                BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    FIRST_NAME        VARCHAR(255),
    LAST_NAME         VARCHAR(255),
    BIRTH_DATE        date,
    REGISTRATION_DATE date,
    SEX               VARCHAR(255),
    PHONE_NUMBER      VARCHAR(255),
    DOCTOR_ID         BIGINT,
    CONSTRAINT pk_patient PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-8
CREATE TABLE PAYMENT
(
    ID     BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    TYPE   VARCHAR(255),
    AMOUNT INTEGER,
    CONSTRAINT pk_payment PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-9
CREATE TABLE TREATMENT_EQUIPMENT
(
    ID               BIGINT NOT NULL,
    TREATMENT_METHOD VARCHAR(255),
    CONSTRAINT pk_treatment_equipment PRIMARY KEY (ID)
);

-- changeset bianc:1716574230089-10
ALTER TABLE APPOINTMENT
    ADD CONSTRAINT uc_appointment_payment UNIQUE (PAYMENT_ID);

-- changeset bianc:1716574230089-11
ALTER TABLE APPOINTMENT
    ADD CONSTRAINT FK_APPOINTMENT_ON_DOCTOR FOREIGN KEY (DOCTOR_ID) REFERENCES DOCTOR (ID);

-- changeset bianc:1716574230089-12
ALTER TABLE APPOINTMENT
    ADD CONSTRAINT FK_APPOINTMENT_ON_PATIENT FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT (ID);

-- changeset bianc:1716574230089-13
ALTER TABLE APPOINTMENT
    ADD CONSTRAINT FK_APPOINTMENT_ON_PAYMENT FOREIGN KEY (PAYMENT_ID) REFERENCES PAYMENT (ID);

-- changeset bianc:1716574230089-14
ALTER TABLE EXAMINATION_EQUIPMENT
    ADD CONSTRAINT FK_EXAMINATION_EQUIPMENT_ON_ID FOREIGN KEY (ID) REFERENCES EQUIPMENT (ID);

-- changeset bianc:1716574230089-15
ALTER TABLE MEDICAL_RECORD
    ADD CONSTRAINT FK_MEDICAL_RECORD_ON_PATIENT FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT (ID);

-- changeset bianc:1716574230089-16
ALTER TABLE OTHER_EQUIPMENT
    ADD CONSTRAINT FK_OTHER_EQUIPMENT_ON_ID FOREIGN KEY (ID) REFERENCES EQUIPMENT (ID);

-- changeset bianc:1716574230089-17
ALTER TABLE PATIENT
    ADD CONSTRAINT FK_PATIENT_ON_DOCTOR FOREIGN KEY (DOCTOR_ID) REFERENCES DOCTOR (ID);

-- changeset bianc:1716574230089-18
ALTER TABLE TREATMENT_EQUIPMENT
    ADD CONSTRAINT FK_TREATMENT_EQUIPMENT_ON_ID FOREIGN KEY (ID) REFERENCES EQUIPMENT (ID);

